<!DOCTYPE html>
<html>
<head>
    <title>ShinobiWay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background-color: #000; color: #fff; font-family: Arial, sans-serif; }
        button { background-color: #fff; color: #000; padding: 5px 10px; margin: 5px; }
        #log { height: 100px; overflow-y: auto; }
    </style>
</head>
<body>
    <div id="player-status">Shinobi [HP: <span class="player-hp">10/10</span>]</div>
    <div id="enemy-status">Enemy [HP: <span class="enemy-hp">0/0</span>]</div>
    <div id="skill-count">Skill cards: 0</div>
    <div id="output">Welcome to ShinobiWay!</div>
    <div id="start-controls">
        <button id="start-button" onclick="startGame()">Start Game</button>
    </div>
    <div id="style-controls"></div> <!-- Separate div for style buttons -->
    <div id="log">Log started...</div>

    <script>
        let game = {
            player: { name: "Shinobi", hp: 10, maxHp: 10, Rank: "Student", skills: [], skillInventory: [] },
            gameState: "start"
        };

        function log(msg) {
            const el = document.getElementById('log');
            el.innerHTML += '<br>' + msg;
        }

        function startGame() {
            log('Starting game at ' + new Date().toLocaleTimeString() + '...');
            if (game.gameState === "start") {
                game.output = ["Train to become a Shinobi!"];
                document.getElementById("output").innerHTML = game.output.join("<br>");
                game.gameState = "chooseStyles";
                log('Setting up style selection...');
                setupStyleButtons();
                document.getElementById("start-button").style.display = "none"; // Hide only after starting
            } else {
                log('Game already started, state: ' + game.gameState);
            }
        }

        function setupStyleButtons() {
            let controls = document.getElementById("style-controls");
            controls.innerHTML = "";
            let remainingStyles = ["Fire", "Illusion"].filter(s => !game.player.skills.includes(s));
            if (remainingStyles.length > 0) {
                remainingStyles.forEach(style => {
                    let button = document.createElement("button");
                    button.innerText = style;
                    button.onclick = function() { selectStyle(style); };
                    controls.appendChild(button);
                    log('Added ' + style + ' button');
                });
            } else {
                log('No styles left to choose.');
            }
        }

        function selectStyle(style) {
            log('Selecting ' + style + '...');
            if (game.player.skills.length < 2 && game.gameState === "chooseStyles") {
                game.player.skills.push(style);
                log(style + ' added to skills!');
                document.getElementById("skill-count").innerText = `Skill cards: ${game.player.skills.length}`;
                setupStyleButtons(); // Refresh with remaining styles
                if (game.player.skills.length === 2) {
                    log('Both styles selected, ready to play!');
                    game.gameState = "battle";
                    document.getElementById("output").innerHTML += "<br>Battle ready!";
                    document.getElementById("style-controls").innerHTML = ""; // Clear style buttons
                }
            } else {
                log('Selection invalid or complete, state: ' + game.gameState);
            }
        }
    </script>
</body>
</html>
